define(["require","exports","game/EntityCreator","game/components/GameState","game/systems/GameManager","game/systems/MotionControlSystem","game/systems/GunControlSystem","game/systems/BulletAgeSystem","game/systems/MovementSystem","game/systems/CollisionSystem","game/systems/RenderSystem","game/systems/SystemPriorities","core/Engine","tools/TickProvider","tools/KeyPoll"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){var w=i,b=r,k=u,d=f,g=e,nt=o,tt=s,it=h,rt=c,p=l,ut=a,ft=v,et=y,ot=function(){function n(){this.width=0,this.height=0,this.engine=null,this.gameState=null,this.tickProvider=null}return n.prototype.initialise=function(n){var r=n.getContext("2d"),i,t;this.width=n.width,this.height=n.height,this.engine=new ut.ash.core.Engine,this.gameState=new b.GameState(this.width,this.height),i=new et.Keypoll,t=new w.EntityCreator(this.engine,r),this.engine.addSystem(new k.GameManager(this.gameState,t),p.SystemPriorities.preUpdate),this.engine.addSystem(new d.MotionControlSystem(i),p.SystemPriorities.update),this.engine.addSystem(new g.GunControlSystem(i,t),p.SystemPriorities.update),this.engine.addSystem(new nt.BulletAgeSystem(t),p.SystemPriorities.update),this.engine.addSystem(new tt.MovementSystem(this.gameState),p.SystemPriorities.move),this.engine.addSystem(new it.CollisionSystem(t),p.SystemPriorities.resolveCollisions),this.engine.addSystem(new rt.RenderSystem(r),p.SystemPriorities.render),this.tickProvider=new ft.TickProvider},n.prototype.start=function(){this.gameState.level=0,this.gameState.lives=3,this.gameState.points=0,this.tickProvider.add(this.engine.update,this.engine),this.tickProvider.start()},n}();t.Asteroids=ot})