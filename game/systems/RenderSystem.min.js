define("game/systems/rendersystem",["ash/system","game/nodes/render"],function(n,t){function r(t){Object.extend(r.prototype,n.prototype),this.initialise(t)}var i=r.prototype;return i.context=null,i.nodes=null,i.initialise=function(n){return this.context=n,this},i.addToEngine=function(n){this.nodes=n.getNodeList(t);for(var i=this.nodes.head;i;i=i.next)this.addToDisplay(i);this.nodes.nodeAdded.add(this.addToDisplay,this),this.nodes.nodeRemoved.add(this.removeFromDisplay,this)},i.removeFromEngine=function(){this.nodes=null},i.addToDisplay=function(){},i.removeFromDisplay=function(){},i.count=0,i.update=function(){var n,i,r,t;for(this.context.save(),this.context.translate(0,0),this.context.rotate(0),this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),n=this.nodes.head;n;n=n.next)r=n.display,t=r.graphic,i=n.position,t.x=i.position.x,t.y=i.position.y,t.rotation=i.rotation,t.draw();this.context.restore()},r})