var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports","core/System","game/nodes/MotionControl"],function(n,t,i,r){var u=i,f=r,e=function(n){function t(t){n.call(this),this.keyPoll=null,this.nodeList=null,this.initialise(t)}return __extends(t,n),t.prototype.initialise=function(n){return this.keyPoll=n,this},t.prototype.addToEngine=function(n){this.nodeList=n.getNodeList(f.MotionControl)},t.prototype.removeFromEngine=function(){this.nodeList=null},t.prototype.update=function(n){for(var t=this.nodeList.head;t;t=t.next)this.updateNode(t,n)},t.prototype.updateNode=function(n,t){var i=n.control,r=n.position,u=n.motion;this.keyPoll.isDown(i.left)&&(r.rotation-=i.rotationRate*t),this.keyPoll.isDown(i.right)&&(r.rotation+=i.rotationRate*t),this.keyPoll.isDown(i.accelerate)&&(u.velocity.x+=Math.cos(r.rotation)*i.accelerationRate*t,u.velocity.y+=Math.sin(r.rotation)*i.accelerationRate*t)},t}(u.ash.core.System);t.MotionControlSystem=e})