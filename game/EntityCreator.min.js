define(["require","exports","core/Entity","tools/KeyPoll","game/components/Asteroid","game/components/Spaceship","game/components/Bullet","game/components/Position","game/components/Motion","game/components/MotionControls","game/components/Gun","game/components/GunControls","game/components/Display","game/graphics/AsteroidView","game/graphics/SpaceshipView","game/graphics/BulletView"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var b=i,w=r,nt=u,tt=f,it=e,k=o,d=s,rt=h,ut=c,ft=l,g=a,et=v,ot=y,st=p,ht=function(){function n(n,t){this.game=null,this.graphics=null,this.initialise(n,t)}return n.prototype.initialise=function(n,t){return this.game=n,this.graphics=t,this},n.prototype.destroyEntity=function(n){this.game.removeEntity(n)},n.prototype.createAsteroid=function(n,t,i){var r=(new b.ash.core.Entity).add(new nt.Asteroid).add(new k.Position(t,i,0,n)).add(new d.Motion((Math.random()-.5)*4*(50-n),(Math.random()-.5)*4*(50-n),Math.random()*2-1,0)).add(new g.Display(new et.AsteroidView(n,this.graphics)));return this.game.addEntity(r),r},n.prototype.createSpaceship=function(){var n=(new b.ash.core.Entity).add(new tt.Spaceship).add(new k.Position(400,300,1,6)).add(new d.Motion(0,0,0,15)).add(new rt.MotionControls(w.Keyboard.keyboard.LEFT,w.Keyboard.keyboard.RIGHT,w.Keyboard.keyboard.UP,100,3)).add(new ut.Gun(8,0,.3,2)).add(new ft.GunControls(w.Keyboard.keyboard.Z)).add(new g.Display(new ot.SpaceshipView(this.graphics)));return this.game.addEntity(n),n},n.prototype.createUserBullet=function(n,t){var i=Math.cos(t.rotation),r=Math.sin(t.rotation),u=(new b.ash.core.Entity).add(new it.Bullet(n.bulletLifetime)).add(new k.Position(i*n.offsetFromParent.x-r*n.offsetFromParent.y+t.position.x,r*n.offsetFromParent.x+i*n.offsetFromParent.y+t.position.y,0,0)).add(new d.Motion(i*150,r*150,0,0)).add(new g.Display(new st.BulletView(this.graphics)));return this.game.addEntity(u),u},n}();t.EntityCreator=ht})