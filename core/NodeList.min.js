define(["require","exports","tools/Signal"],function(n,t,i){var r=i,u;(function(n){(function(n){var t=function(){function n(){this.head=null,this.tail=null,this.nodeAdded=new r.Signal,this.nodeRemoved=new r.Signal}return n.prototype.add=function(n){this.head?(this.tail.next=n,n.previous=this.tail,n.next=null,this.tail=n):(this.head=this.tail=n,n.next=n.previous=null),this.nodeAdded.dispatch(n)},n.prototype.remove=function(n){this.head==n&&(this.head=this.head.next),this.tail==n&&(this.tail=this.tail.previous),n.previous&&(n.previous.next=n.next),n.next&&(n.next.previous=n.previous),this.nodeRemoved.dispatch(n)},n.prototype.removeAll=function(){while(this.head){var n=this.head;this.head=n.next,n.previous=null,n.next=null,this.nodeRemoved.dispatch(n)}this.tail=null},n.prototype.empty=function(){return this.head==null},n.prototype.swap=function(n,t){if(n.previous==t)n.previous=t.previous,t.previous=n,t.next=n.next,n.next=t;else if(t.previous==n)t.previous=n.previous,n.previous=t,n.next=t.next,t.next=n;else{var i=n.previous;n.previous=t.previous,t.previous=i,i=n.next,n.next=t.next,t.next=i}this.head==n?this.head=t:this.head==t&&(this.head=n),this.tail==n?this.tail=t:this.tail==t&&(this.tail=n),n.previous&&(n.previous.next=n),t.previous&&(t.previous.next=t),n.next&&(n.next.previous=n),t.next&&(t.next.previous=t)},n.prototype.insertionSort=function(n){var r,t,i;if(this.head!=this.tail)for(r=this.head.next,t=r;t;t=r){for(r=t.next,i=t.previous;i;i=i.previous)if(n(t,i)>=0){t!=i.next&&(this.tail==t&&(this.tail=t.previous),t.previous.next=t.next,t.next&&(t.next.previous=t.previous),t.next=i.next,t.previous=i,t.next.previous=t,i.next=t);break}i||(this.tail==t&&(this.tail=t.previous),t.previous.next=t.next,t.next&&(t.next.previous=t.previous),t.next=this.head,this.head.previous=t,t.previous=null,this.head=t)}},n.prototype.mergeSort=function(n){var r,i,t,u;if(this.head!=this.tail){for(i=this.head;i;){for(t=i;t.next&&n(t,t.next)<=0;)t=t.next;u=t.next,i.previous=t.next=null,r.push(i),i=u}while(r.length>1);for(this.tail=this.head=r[0];this.tail.next;)this.tail=this.tail.next}},n.prototype._merge=function(n,t,i){var r,u;for(i(n,t)<=0?(u=r=n,n=n.next):(u=r=t,t=t.next);n&&t;)i(n,t)<=0?(r.next=n,n.previous=r,r=n,n=n.next):(r.next=t,t.previous=r,r=t,t=t.next);return n?(r.next=n,n.previous=r):(r.next=t,t.previous=r),u},n}();n.NodeList=t})(n.core||(n.core={}));var t=n.core})(t.ash||(t.ash={})),u=t.ash})